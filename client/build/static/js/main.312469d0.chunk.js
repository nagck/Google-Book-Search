(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{30:function(e,t,a){e.exports=a(59)},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),c=(a(19),a(28)),s=a(1);var i=function(){return r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-primary"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"Google Books"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"Search")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/saved"},"Saved"))))},u=a(8),m=a(9),d=a(11),h=a(10);function v(e){var t=e.children;return r.a.createElement("div",{className:"container"},t)}function f(e){var t=e.children;return r.a.createElement("div",{className:"row"},t)}function b(e){var t=e.children;return r.a.createElement("div",{className:"col"},t)}var k=function(e){var t=e.onClick,a=e.children;return r.a.createElement("button",{onClick:t,className:"btn btn-primary"},a)};function E(e){var t=e.children;return r.a.createElement("ul",{className:"list-group"},t)}function p(e){var t=e.googleId,a=e.title,n=e.authors,o=e.description,l=e.thumbnail,c=e.href,s=e.date,i=e.clickEvent,u=e.saved,m=e.screenWidth;return console.log(u),r.a.createElement("li",{className:"list-group-item m-2"},m>=768&&r.a.createElement("div",{className:"float-right"},u?r.a.createElement("button",{className:"btn btn-danger",onClick:function(e){return i(e,t)}},"Unsave"):r.a.createElement("button",{className:"btn btn-success",onClick:function(e){return i(e,t,a,n,o,c,l)}},"Save"),r.a.createElement("a",{className:"btn btn-primary ml-2 mr-2",href:c,target:"_blank",rel:"noopener noreferrer"},"View")),r.a.createElement("h4",{className:"font-weight-bold"},a),r.a.createElement("h5",null,"by ",n.length>1?n.reduce((function(e,t){return[e,", ",t]})):n[0]),r.a.createElement(f,null,r.a.createElement("div",{className:"col-sm-12 col-md-auto text-center"},r.a.createElement("img",{src:l,alt:a,className:"mt-1 mb-2"})),r.a.createElement(b,null,r.a.createElement("p",{className:m<768?"text-justify":""},o))),m<768&&r.a.createElement("div",{className:"row"},r.a.createElement(b,null,u?r.a.createElement("button",{className:"btn btn-danger btn-block",onClick:function(e){return i(e,t)}},"Unsave"):r.a.createElement("button",{className:"btn btn-success btn-block",onClick:function(e){return i(e,t,a,n,o,c,l)}},"Save")),r.a.createElement(b,null,r.a.createElement("a",{className:"btn btn-primary btn-block",href:c,target:"_blank",rel:"noopener noreferrer"},"View"))),u&&r.a.createElement("div",{className:"row"},r.a.createElement(b,null,r.a.createElement("small",{className:"text-right"},"Saved on ",s))))}var g=a(13),S=a.n(g),N=a(27),B=a.n(N),w=function(e){return S.a.get("./api/books",{params:{q:e}})},y=function(){return S.a.get("/api/savedBooks")},I=function(e){return S.a.post("./api/savedBooks",e)},D=function(e){return S.a.delete("/api/savedBooks/".concat(e))},W=function(e){var t=e.toString().substring(0,8),a=new Date(1e3*parseInt(t,16));return B()(a).format("MMM D, YYY @ h:mma")},j=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={books:[],bookSearch:"",savedBooks:[],screenWidth:window.innerWidth,searched:""},e.checkIfSaved=function(t){for(var a in e.state.savedBooks)if(e.state.savedBooks[a].googleId===t)return!0;return!1},e.checkSavedDate=function(t){for(var a in e.state.savedBooks)if(e.state.savedBooks[a].googleId===t)return W(e.state.savedBooks[a]._id);return null},e.updateDimensions=function(){e.setState({screenWidth:window.innerWidth})},e.loadSavedBooks=function(){y().then((function(t){e.setState({savedBooks:t.data})}))},e.handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState({[n]:r})},e.handleFormSubmit=function(t){t.preventDefault(),e.setState({searched:e.state.bookSearch,bookSearch:""}),w(e.state.bookSearch).then((function(t){return e.setState({books:t.data},(function(){return console.log(t.data)}))})).catch((function(e){return console.log(e)}))},e.deleteSavedBook=function(t,a){t.preventDefault(),D(a).then((function(t){return e.loadSavedBooks()})).catch((function(e){return console.log(e)}))},e.handleSave=function(t,a,n,r,o,l,c){t.preventDefault(),I({googleId:a,title:n,authors:r,description:o,href:l,thumbnail:c}).then((function(t){return e.loadSavedBooks()}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadSavedBooks(),window.addEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var e=this;return r.a.createElement(v,null,r.a.createElement(f,null,r.a.createElement("div",{className:"col rounded text-center bg-warning mt-4 p-4"},r.a.createElement("h2",null,"(React) Google Book Search"),r.a.createElement("h4",null,"Search for and Save Books of Interest"))),r.a.createElement(f,null,r.a.createElement("div",{className:"col rounded bg-light mb-4 mt-4 p-4"},r.a.createElement("h4",null,"Book Search"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"bookSearch"},"Book"),r.a.createElement("input",{type:"text",className:"form-control",id:"bookSearch",name:"bookSearch",value:this.state.bookSearch,onChange:this.handleInputChange})),r.a.createElement(k,{className:"btn btn-primary",onClick:this.handleFormSubmit},"Search")))),r.a.createElement(f,null,r.a.createElement("div",{className:"col border border-rounded p-3 mb-4"},""===this.state.searched?r.a.createElement("h4",null,"Results"):r.a.createElement("h4",null,"Results for ",this.state.searched),this.state.books.length?r.a.createElement(E,null,this.state.books.map((function(t){return r.a.createElement(p,{key:t.volumeInfo.infoLink,googleId:t.id,title:t.volumeInfo.title||"Title Unavailable",authors:t.volumeInfo.authors||["Unknown Author"],description:t.volumeInfo.description||"No description available",thumbnail:t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.smallThumbnail:"img/placeholder.png",href:t.volumeInfo.infoLink,saved:e.checkIfSaved(t.id),clickEvent:e.checkIfSaved(t.id)?e.deleteSavedBook:e.handleSave,date:e.checkSavedDate(t.id),screenWidth:e.state.screenWidth})}))):r.a.createElement("h6",{className:"text-center"},"No books to display currently"))))}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={savedBooks:[],screenWidth:window.innerWidth},e.updateDimensions=function(){e.setState({screenWidth:window.innerWidth},(function(){return console.log(e.state.screenWidth)}))},e.loadSavedBooks=function(){y().then((function(t){return e.setState({savedBooks:t.data})}))},e.deleteSavedBook=function(t,a){t.preventDefault(),D(a).then((function(t){return e.loadSavedBooks()})).catch((function(e){return console.log(e)}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadSavedBooks(),window.addEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var e=this;return r.a.createElement(v,null,r.a.createElement(f,null,r.a.createElement("div",{className:"col rounded text-center bg-info mt-4 mb-4 p-4"},r.a.createElement("h2",null,"(React) Google Book Search"),r.a.createElement("h4",null,"Search for and Save Books of Interest"))),r.a.createElement(f,null,r.a.createElement("div",{className:"col border border-rounded p-3 mb-4"},r.a.createElement("h4",null,"Saved Books"),this.state.savedBooks.length?r.a.createElement(E,null,this.state.savedBooks.map((function(t){return r.a.createElement(p,{key:t.googleId,googleId:t.googleId,title:t.title,authors:t.authors,description:t.description,thumbnail:t.thumbnail,href:t.href,date:W(t._id),saved:!0,clickEvent:e.deleteSavedBook,screenWidth:e.state.screenWidth})}))):r.a.createElement("h6",{className:"text-center"},"No books saved to display"))))}}]),a}(n.Component),O=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"404 Page Not Found")}}]),a}(n.Component);var x=function(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(i,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:j}),r.a.createElement(s.a,{path:"/saved",component:C}),r.a.createElement(s.a,{path:"/books",component:C}),r.a.createElement(s.a,{component:O}))))};l.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.312469d0.chunk.js.map